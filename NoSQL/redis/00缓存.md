## 1. 什么时候用到缓存

​	热点数据

​	并发读的请求量非常大，读多写少的一个场景

​	对访问速度有一定要求

​	对数据一致性要求没那么高

缓存的加载逻辑，被动加载

## 2. 缓存击穿

某个缓存key在某个时间点过期的时候，如果缓存数据作为热点数据，那么有可能在过期时间点高并发访问这个key，此时请求压力直接传至数据库，可能导致数据库挂掉



解决方案：

​	加锁，限制所有的请求都到数据库（加分布式锁）

​	限流（hystrix）nginx

## 3. 缓存穿透

在黑客恶意攻击下大量请求查询在缓存中一定不存在的数据，即利用缓存中不存的key频繁攻击我们的应用，导致每次查询都去数据库存储层查找，将直接导致数据库挂掉。



解决方案：

布隆过滤器：能迅速判断一个元素是否在一个集合，其核心实现是一个超大的二进制向量（位数组）和几个哈希函数实现快速定位，是一个空间效率、查询效率很高的概率型算法

缺点：1.有一定的误判率，2. 数据删除困难

![1553776260906](img\1553776260906.png)

## 4. 缓存雪崩

大面积的key缓存集中在某一个时间段失效，造成所有的请求到db中，给db带来巨大压力，甚至可能造成db服务挂掉

解决方案：

 	1. 不同的key，设置不同的过期时间，让缓存失效的时间点尽量均匀
 	2. 通过加锁控制请求load到数据库的数量，同一时刻只允许一个请求查数据库数据